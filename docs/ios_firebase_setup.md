# iOS Push Notifications Setup –¥–ª—è Firebase

## üçé –ù–∞—Å—Ç—Ä–æ–π–∫–∞ iOS –¥–ª—è Firebase Push Notifications

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –≤ Apple Developer Account

#### –°–æ–∑–¥–∞–Ω–∏–µ App ID —Å Push Notifications:
1. –í–æ–π–¥–∏—Ç–µ –≤ [Apple Developer Console](https://developer.apple.com/account/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Certificates, Identifiers & Profiles"
3. –í —Ä–∞–∑–¥–µ–ª–µ "Identifiers" –Ω–∞–π–¥–∏—Ç–µ –≤–∞—à App ID
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∫–ª—é—á–µ–Ω–∞ –æ–ø—Ü–∏—è "Push Notifications"
5. –ï—Å–ª–∏ –Ω–µ –≤–∫–ª—é—á–µ–Ω–∞ - –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∏ –≤–∫–ª—é—á–∏—Ç–µ

#### –°–æ–∑–¥–∞–Ω–∏–µ APNs –∫–ª—é—á–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
1. –í —Ä–∞–∑–¥–µ–ª–µ "Keys" —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á
2. –î–∞–π—Ç–µ –µ–º—É –∏–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Naliv Push Notifications")
3. –í—ã–±–µ—Ä–∏—Ç–µ "Apple Push Notifications service (APNs)"
4. –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª –∫–ª—é—á–∞ (.p8)
5. –ó–∞–ø–æ–º–Ω–∏—Ç–µ Key ID –∏ Team ID

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Firebase Console

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
1. –û—Ç–∫—Ä–æ–π—Ç–µ [Firebase Console](https://console.firebase.google.com/)
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –ù–∞–∂–º–∏—Ç–µ "Add app" ‚Üí iOS
4. –í–≤–µ–¥–∏—Ç–µ Bundle ID: `com.naliv.delivery` (–∏–ª–∏ –≤–∞—à Bundle ID)
5. –°–∫–∞—á–∞–π—Ç–µ `GoogleService-Info.plist`

#### –ó–∞–≥—Ä—É–∑–∫–∞ APNs –∫–ª—é—á–∞:
1. –í Firebase Console –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Project Settings
2. –í–∫–ª–∞–¥–∫–∞ "Cloud Messaging"
3. –í —Ä–∞–∑–¥–µ–ª–µ "iOS app configuration"
4. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∞—à APNs –∫–ª—é—á (.p8 —Ñ–∞–π–ª)
5. –í–≤–µ–¥–∏—Ç–µ Key ID –∏ Team ID

### 3. –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)

#### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `ios/Runner/AppDelegate.swift` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Firebase Messaging
- `ios/Runner/Info.plist` - –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã background modes
- `ios/Runner/Runner.entitlements` - –Ω–∞—Å—Ç—Ä–æ–µ–Ω aps-environment
- `ios/Podfile` - —É–∫–∞–∑–∞–Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è iOS 12.0

#### ‚úÖ –î–æ–ª–∂–µ–Ω –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å:
- `ios/Runner/GoogleService-Info.plist` ‚úÖ (—É–∂–µ –µ—Å—Ç—å)

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```bash
cd /Users/shrvse/naliv_delivery
flutter run
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ª–æ–≥–∞—Ö:
–î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è:
- `üîî –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π...`
- `üì± FCM Token: [–¥–ª–∏–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω]`
- `Firebase registration token: [—Ç–æ–∫–µ–Ω]`

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

#### –ß–µ—Ä–µ–∑ Firebase Console:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Cloud Messaging"
2. –ù–∞–∂–º–∏—Ç–µ "Send your first message"
3. –í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Ç–µ–∫—Å—Ç
4. –í—ã–±–µ—Ä–∏—Ç–µ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

#### –ß–µ—Ä–µ–∑ –∫–æ–¥ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏):
```dart
import 'package:naliv_delivery/services/notification_service.dart';

// –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω
final token = NotificationService.instance.fcmToken;
print('FCM Token –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: $token');
```

### 6. –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

#### Development (–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞):
- `aps-environment: development` –≤ entitlements
- –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç development APNs —Å–µ—Ä–≤–µ—Ä

#### Production (–ü—Ä–æ–¥–∞–∫—à–Ω):
- `aps-environment: production` –≤ entitlements
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç production APNs —Å–µ—Ä–≤–µ—Ä

### 7. Troubleshooting

#### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Bundle ID –≤ Firebase –∏ Xcode
2. ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ APNs –∫–ª—é—á –∑–∞–≥—Ä—É–∂–µ–Ω –≤ Firebase
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
4. ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã

#### FCM —Ç–æ–∫–µ–Ω –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ GoogleService-Info.plist
2. ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Firebase.configure() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É

#### –û—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏:
```bash
# –û—á–∏—Å—Ç–∏—Ç—å –∏ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
cd ios
rm -rf Pods Podfile.lock
pod install
cd ..
flutter clean
flutter pub get
flutter run
```

### 8. –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç

- [ ] App ID —Å Push Notifications —Å–æ–∑–¥–∞–Ω –≤ Apple Developer
- [ ] APNs –∫–ª—é—á —Å–æ–∑–¥–∞–Ω –∏ —Å–∫–∞—á–∞–Ω (.p8 —Ñ–∞–π–ª)
- [ ] iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ Firebase Console
- [ ] APNs –∫–ª—é—á –∑–∞–≥—Ä—É–∂–µ–Ω –≤ Firebase Console
- [ ] GoogleService-Info.plist –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ø—Ä–æ–µ–∫—Ç
- [ ] AppDelegate.swift –æ–±–Ω–æ–≤–ª–µ–Ω
- [ ] aps-environment –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ entitlements
- [ ] Pod dependencies —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- [ ] FCM —Ç–æ–∫–µ–Ω –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
- [ ] –¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –ø–æ–ª—É—á–µ–Ω–æ

### 9. Bundle ID –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞

**–¢–µ–∫—É—â–∏–π Bundle ID:** –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ `ios/Runner.xcodeproj`

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Bundle ID
grep -r "PRODUCT_BUNDLE_IDENTIFIER" ios/Runner.xcodeproj/
```

### 10. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

#### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
- Rich notifications (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≤–∏–¥–µ–æ)
- Actionable notifications (–∫–Ω–æ–ø–∫–∏)
- Custom sounds

#### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞:
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ú–µ—Ç—Ä–∏–∫–∏ –æ—Ç–∫—Ä—ã—Ç–∏–π
- A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

---

**–í–∞–∂–Ω–æ:** iOS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö, –Ω–µ –Ω–∞ —Å–∏–º—É–ª—è—Ç–æ—Ä–µ!
